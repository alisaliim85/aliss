<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>مواردي | الصفحة الرئيسية</title>

  <style>
    :root{
      --bg:#f5f9ff;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#64748b;
      --border: rgba(2, 44, 92, 0.12);
      --shadow: 0 14px 30px rgba(2, 44, 92, 0.10);
      --grad: linear-gradient(135deg, #0b5ed7, #4dabf7);
      --gradSoft: linear-gradient(135deg, rgba(11,94,215,.12), rgba(77,171,247,.12));
      --radius: 16px;
      --radius2: 12px;
      --ring: 0 0 0 4px rgba(77,171,247,.22);
    }

    *{ box-sizing: border-box; }
    html{ scroll-behavior: smooth; }
    body{
      margin: 0;
      font-family: "Cairo", system-ui, -apple-system, Segoe UI, Arial, sans-serif;
      direction: rtl;
      /* ✅ خلفية هادئة لأن الفيديو صار الخلفية */
      background: var(--bg);
      color: var(--text);
    }

    /* ===============================
       GLOBAL VIDEO BACKGROUND (هادئ)
       =============================== */
    .page-bg{
      position: fixed;
      inset: 0;
      z-index: -2; /* خلف كل شيء */
      overflow: hidden;
      pointer-events: none;
    }

    .page-bg-video{
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform: scale(1.03);

      /* ✅ تخفيف الفيديو */
      opacity: .20;
      filter: blur(1.5px) brightness(.95) saturate(.9) contrast(.95);
    }

    /* ✅ تباين خفيف جدًا واحترافي */
    .page-bg-overlay{
      position: absolute;
      inset: 0;
      z-index: 1;
      background:
        radial-gradient(900px 500px at 85% 10%, rgba(77,171,247,.16), transparent 60%),
        radial-gradient(900px 500px at 10% 10%, rgba(11,94,215,.14), transparent 55%),
        linear-gradient(135deg, rgba(2,44,92,.22), rgba(11,94,215,.16), rgba(77,171,247,.12));
    }

    .container{
      max-width: 1200px;
      margin: 0 auto;
      padding: 22px 18px 40px;
    }

    .hero{
      display:grid;
      grid-template-columns: 1.4fr 1fr;
      gap: 18px;
      align-items: stretch;
      margin-top: 18px;
    }

    .card{
      /* ✅ Glass effect مناسب للفيديو */
      background: rgba(255,255,255,0.92);
      backdrop-filter: blur(10px);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      transform: translateZ(0);
      transition: transform .25s ease, box-shadow .25s ease;
    }
    .card:hover{
      transform: translateY(-3px);
      box-shadow: 0 18px 40px rgba(2,44,92,.14);
    }

    .hero-main{
      padding: 22px;
      overflow:hidden;
      position: relative;
    }

    /* دوائر متحركة بالهيرو */
    .hero-main::before{
      content:"";
      position:absolute;
      inset: -60px -80px auto auto;
      width: 260px;
      height: 260px;
      background: var(--gradSoft);
      border-radius: 999px;
      transform: rotate(20deg);
      animation: heroFloat 7s ease-in-out infinite;
      pointer-events:none;
      opacity: .95;
    }
    .hero-main::after{
      content:"";
      position:absolute;
      inset: auto auto -80px -90px;
      width: 320px;
      height: 320px;
      background: linear-gradient(135deg, rgba(11,94,215,.10), rgba(77,171,247,.14));
      border-radius: 999px;
      animation: heroFloat2 9s ease-in-out infinite;
      pointer-events:none;
      opacity: .95;
    }
    @keyframes heroFloat{
      0%,100%{ transform: translateY(0) rotate(18deg); }
      50%{ transform: translateY(14px) rotate(24deg); }
    }
    @keyframes heroFloat2{
      0%,100%{ transform: translateY(0) rotate(-10deg); }
      50%{ transform: translateY(-12px) rotate(-4deg); }
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(11,94,215,.10);
      border: 1px solid rgba(11,94,215,.18);
      color: #0b5ed7;
      font-weight: 800;
      font-size: 13px;
      position: relative;
      z-index: 1;
    }

    .hero-title{
      margin: 14px 0 10px;
      font-size: clamp(22px, 3.2vw, 34px);
      line-height: 1.25;
      position: relative;
      z-index: 1;
    }

    .hero-desc{
      margin: 0;
      color: var(--muted);
      line-height: 1.9;
      font-size: 15px;
      max-width: 60ch;
      position: relative;
      z-index: 1;
    }

    .hero-actions{
      margin-top: 18px;
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      position: relative;
      z-index: 1;
    }

    .btn{
      position: relative;
      border: 1px solid rgba(11,94,215,.22);
      background: rgba(11,94,215,.08);
      color:#0b5ed7;
      padding: 12px 14px;
      border-radius: 12px;
      font-size: 14px;
      cursor:pointer;
      transition: transform .2s ease, background .25s ease, box-shadow .25s ease;
      line-height: 1;
      font-weight: 800;
      overflow: hidden;
    }
    .btn:hover{ background: rgba(11,94,215,.12); transform: translateY(-1px); box-shadow: 0 12px 22px rgba(2,44,92,.12); }
    .btn:active{ transform: translateY(0) scale(.98); }
    .btn:focus{ outline:none; box-shadow: var(--ring); }

    .btn.primary{
      background: var(--grad);
      color:#fff;
      border-color: transparent;
    }
    .btn.primary:hover{ filter: brightness(1.03); }

    .hero-side{ padding: 18px; display:flex; flex-direction: column; gap: 12px; }

    .mini{
      padding: 14px;
      border-radius: var(--radius2);
      background: linear-gradient(135deg, rgba(11,94,215,.08), rgba(77,171,247,.08));
      border: 1px solid rgba(2,44,92,.10);
      transition: transform .25s ease;
    }
    .mini:hover{ transform: translateY(-2px); }
    .mini h3{ margin: 0 0 8px; font-size: 14px; font-weight: 900; }
    .mini p{ margin: 0; color: var(--muted); line-height: 1.8; font-size: 13px; }

    .stats{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
      margin-top: 16px;
      position: relative;
      z-index: 1;
    }
    .stat{ padding: 14px; }
    .stat .num{ font-size: 22px; font-weight: 900; color:#0b5ed7; margin-bottom: 6px; }
    .stat .label{ color: var(--muted); font-size: 13px; }

    .section{ margin-top: 18px; padding: 18px; }

    .section-title{
      margin: 0 0 12px;
      font-size: 16px;
      font-weight: 900;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 12px;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
    }

    .feature{
      padding: 16px;
      border-radius: var(--radius2);
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.95);
      transition: transform .25s ease, box-shadow .25s ease;
    }
    .feature:hover{ transform: translateY(-3px); box-shadow: 0 16px 34px rgba(2,44,92,.10); }

    .feature h4{ margin: 0 0 8px; font-size: 14px; font-weight: 900; }
    .feature p{ margin: 0; color: var(--muted); line-height: 1.9; font-size: 13px; }

    .steps{
      display:grid;
      grid-template-columns: 1.2fr 1fr;
      gap: 12px;
      margin-top: 12px;
      align-items: stretch;
    }
    .step{
      padding: 16px;
      border-radius: var(--radius2);
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.95);
    }
    .step b{ color:#0b5ed7; }

    .toolbar{ display:flex; gap: 10px; flex-wrap: wrap; align-items:center; }
    .search{
      flex: 1;
      min-width: 220px;
      display:flex;
      align-items:center;
      gap: 10px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.95);
      border-radius: 12px;
      padding: 10px 12px;
      transition: box-shadow .25s ease, transform .25s ease;
    }
    .search:focus-within{ box-shadow: var(--ring); transform: translateY(-1px); }
    .search input{
      border: none;
      outline: none;
      width: 100%;
      font-size: 14px;
      background: transparent;
      color: var(--text);
    }

    /* Reveal on scroll */
    .reveal{
      opacity: 0;
      transform: translateY(14px);
      transition: opacity .55s ease, transform .55s ease;
    }
    .reveal.show{
      opacity: 1;
      transform: translateY(0);
    }

    /* Ripple */
    .ripple{
      position:absolute;
      border-radius: 999px;
      transform: scale(0);
      animation: ripple .55s ease-out;
      background: rgba(255,255,255,.45);
      pointer-events:none;
      mix-blend-mode: overlay;
    }
    @keyframes ripple{
      to{ transform: scale(3); opacity: 0; }
    }

    @media (max-width: 980px){
      .hero{ grid-template-columns: 1fr; }
      .stats{ grid-template-columns: repeat(2, 1fr); }
      .grid{ grid-template-columns: 1fr; }
      .steps{ grid-template-columns: 1fr; }
      /* موبايل: خفف الحمل */
      .page-bg-video{
        opacity: .16;
        filter: blur(1px) brightness(.95) saturate(.9) contrast(.95);
      }
    }
    @media (max-width: 520px){
      .container{ padding: 16px 14px 34px; }
      .stats{ grid-template-columns: 1fr; }
    }

    @media (prefers-reduced-motion: reduce){
      html{ scroll-behavior: auto; }
      .card,.feature,.btn,.mini,.search{ transition: none; }
      .hero-main::before,.hero-main::after{ animation: none; }
      .reveal{ opacity: 1; transform: none; transition: none; }
      .page-bg-video{ display:none; }
      .page-bg-overlay{
        background: linear-gradient(135deg, #0b5ed7, #4dabf7);
        opacity: .10;
      }
    }
  </style>
</head>

<body>

  <!-- ✅ خلفية فيديو خفيفة لكل الصفحة -->
  <div class="page-bg" aria-hidden="true">
    <video class="page-bg-video" autoplay muted loop playsinline preload="metadata">
      <source src="media/background.mp4" type="video/mp4" />
    </video>
    <div class="page-bg-overlay"></div>
  </div>

  <div id="header"></div>

  <div class="container">
    <section class="hero">
      <div class="card hero-main reveal">
        <div class="badge">منصة مواردي • إدارة شركات التوريد</div>
        <h1 class="hero-title">نظّم طلبات العمالة، العقود، والمتابعة اليومية في مكان واحد</h1>
        <p class="hero-desc">
          مواردي تساعدك على إدارة الموردين، إصدار الطلبات، متابعة الحالات، وتوليد تقارير سريعة — بتجربة استخدام بسيطة وواجهة احترافية.
        </p>

        <div class="hero-actions">
          <button class="btn primary btn-ripple" type="button" id="startBtn">ابدأ الآن</button>
          <button class="btn btn-ripple" type="button">استعراض لوحة التحكم</button>
        </div>

        <div class="stats">
          <div class="card stat reveal">
            <div class="num" data-count="120" data-prefix="+" id="s1">0</div>
            <div class="label">شركة توريد نشطة</div>
          </div>
          <div class="card stat reveal">
            <div class="num" data-count="540" data-prefix="+" id="s2">0</div>
            <div class="label">طلب تمت متابعته</div>
          </div>
          <div class="card stat reveal">
            <div class="num" data-count="98" data-suffix="%" id="s3">0</div>
            <div class="label">التزام بالمتابعة</div>
          </div>
          <div class="card stat reveal">
            <div class="num" id="s4">24/7</div>
            <div class="label">دعم وتشغيل</div>
          </div>
        </div>
      </div>

      <aside class="card hero-side reveal">
        <div class="mini">
          <h3>إدارة الموردين</h3>
          <p>أضف شركات التوريد، وثّق بيانات التواصل، وحدد التخصصات والقدرات.</p>
        </div>
        <div class="mini">
          <h3>طلبات وعقود</h3>
          <p>سجل الطلبات، اربطها بالعقود، وتابع الموافقات والحالات خطوة بخطوة.</p>
        </div>
        <div class="mini">
          <h3>تقارير سريعة</h3>
          <p>إحصائيات يومية وأسبوعية لتقييم الأداء، زمن الاستجابة، وجودة المورد.</p>
        </div>
      </aside>
    </section>

    <section class="card section reveal">
      <div class="section-title">
        <span>خدمات رئيسية</span>
        <div class="toolbar">
          <div class="search" role="search">
            <span style="color:#0b5ed7;font-weight:900;">بحث</span>
            <input id="searchInput" type="search" placeholder="ابحث عن خدمة مثل: عقود، طلبات، تقارير..." />
          </div>
          <button class="btn btn-ripple" type="button" id="resetBtn">إعادة</button>
        </div>
      </div>

      <div class="grid" id="featuresGrid">
        <div class="feature reveal" data-keywords="شركات الموردين التوريد بيانات">
          <h4>ملف شركة توريد</h4>
          <p>حفظ بيانات الشركة، التخصصات، السجلات، والتقييمات بشكل مرتب.</p>
        </div>
        <div class="feature reveal" data-keywords="طلبات تعميد متابعة حالة">
          <h4>إدارة الطلبات</h4>
          <p>إنشاء طلب، تحديد العدد والمدة، متابعة الموافقات والتحديثات.</p>
        </div>
        <div class="feature reveal" data-keywords="عقود اسعار بنود">
          <h4>إدارة العقود</h4>
          <p>تخزين بنود العقود والأسعار وربطها بالطلبات تلقائياً.</p>
        </div>
        <div class="feature reveal" data-keywords="تقارير احصائيات اداء">
          <h4>تقارير الأداء</h4>
          <p>عرض مؤشرات مثل زمن الاستجابة، نسبة الالتزام، وأكثر.</p>
        </div>
        <div class="feature reveal" data-keywords="اشعارات تنبيهات تحديثات">
          <h4>تنبيهات وإشعارات</h4>
          <p>إشعار تلقائي عند تغيير حالة الطلب أو اقتراب موعد التجديد.</p>
        </div>
        <div class="feature reveal" data-keywords="صلاحيات ادوار مستخدمين">
          <h4>أدوار وصلاحيات</h4>
          <p>تحكم بالصلاحيات: مدير، موظف، مراقب، ومورّد حسب الحاجة.</p>
        </div>
      </div>
    </section>

    <section class="card section reveal">
      <div class="section-title">كيف تبدأ؟</div>

      <div class="steps">
        <div class="step">
          <p><b>1)</b> أضف شركات التوريد وأدخل بياناتها الأساسية.</p>
          <p><b>2)</b> أنشئ عقد/اتفاقية وحدد الأسعار والفئات.</p>
          <p><b>3)</b> أنشئ طلب عمالة واربطه بالعقد.</p>
          <p><b>4)</b> تابع الحالة حتى الإغلاق واطبع تقرير الأداء.</p>
        </div>

        <div class="step">
          <p><b>ملاحظة:</b> هذا قالب واجهة. لاحقاً نربطه بـ Django/DRF أو Supabase بسهولة.</p>
          <button class="btn primary btn-ripple" type="button">عرض نموذج طلب</button>
        </div>
      </div>
    </section>
  </div>

  <div id="footer"></div>

  <script>
    // حقن الهيدر/الفوتر مع تشغيل سكربتاتهم (حتى يحترم أسلوبك: CSS+HTML+JS داخل نفس القالب)
    function injectWithScripts(targetId, html) {
      const host = document.getElementById(targetId);
      if (!host) return;

      const tpl = document.createElement('template');
      tpl.innerHTML = html.trim();

      host.innerHTML = "";

      const scripts = Array.from(tpl.content.querySelectorAll('script'));
      scripts.forEach(s => s.remove());

      host.appendChild(tpl.content);

      scripts.forEach(oldScript => {
        const s = document.createElement('script');
        for (const attr of oldScript.attributes) s.setAttribute(attr.name, attr.value);
        s.text = oldScript.textContent;
        host.appendChild(s);
      });
    }

    fetch("header.html")
      .then(r => r.text())
      .then(html => injectWithScripts("header", html))
      .catch(err => console.error("Header load error:", err));

    fetch("footer.html")
      .then(r => r.text())
      .then(html => injectWithScripts("footer", html))
      .catch(err => console.error("Footer load error:", err));

    // بحث بسيط داخل الخدمات
    const searchInput = document.getElementById('searchInput');
    const resetBtn = document.getElementById('resetBtn');
    const featuresGrid = document.getElementById('featuresGrid');

    function filterFeatures(q){
      const query = (q || "").trim().toLowerCase();
      const items = featuresGrid.querySelectorAll('.feature');
      items.forEach(item => {
        const text = (item.textContent + " " + (item.getAttribute('data-keywords') || "")).toLowerCase();
        item.style.display = text.includes(query) ? "" : "none";
      });
    }

    if(searchInput){
      searchInput.addEventListener('input', e => filterFeatures(e.target.value));
    }
    if(resetBtn){
      resetBtn.addEventListener('click', () => {
        searchInput.value = "";
        filterFeatures("");
      });
    }

    // زر "ابدأ الآن"
    const startBtn = document.getElementById('startBtn');
    if(startBtn){
      startBtn.addEventListener('click', () => {
        const el = document.getElementById('featuresGrid');
        if(el) el.scrollIntoView({ behavior: "smooth", block: "start" });
      });
    }

    // Reveal on Scroll
    (function(){
      const reduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if(reduced){
        document.querySelectorAll('.reveal').forEach(el => el.classList.add('show'));
        return;
      }

      const io = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if(entry.isIntersecting){
            entry.target.classList.add('show');
            io.unobserve(entry.target);
          }
        });
      }, { threshold: 0.12 });

      document.querySelectorAll('.reveal').forEach(el => io.observe(el));
    })();

    // Count-up للأرقام
    (function(){
      const reduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if(reduced) return;

      const counters = document.querySelectorAll('[data-count]');
      if(!counters.length) return;

      function animateCounter(el){
        const target = Number(el.getAttribute('data-count')) || 0;
        const prefix = el.getAttribute('data-prefix') || "";
        const suffix = el.getAttribute('data-suffix') || "";
        const duration = 900;
        const start = performance.now();

        function tick(now){
          const p = Math.min((now - start) / duration, 1);
          const value = Math.floor(target * (0.15 + 0.85 * p));
          el.textContent = prefix + value.toLocaleString('ar-SA') + suffix;
          if(p < 1) requestAnimationFrame(tick);
          else el.textContent = prefix + target.toLocaleString('ar-SA') + suffix;
        }
        requestAnimationFrame(tick);
      }

      const io = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if(entry.isIntersecting){
            animateCounter(entry.target);
            io.unobserve(entry.target);
          }
        });
      }, { threshold: 0.4 });

      counters.forEach(el => io.observe(el));
    })();

    // Ripple للأزرار داخل الصفحة (غير الهيدر)
    (function(){
      const reduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if(reduced) return;

      document.querySelectorAll('.btn-ripple').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const rect = btn.getBoundingClientRect();
          const size = Math.max(rect.width, rect.height);
          const ripple = document.createElement('span');
          ripple.className = 'ripple';
          ripple.style.width = ripple.style.height = size + 'px';
          ripple.style.left = (e.clientX - rect.left - size/2) + 'px';
          ripple.style.top  = (e.clientY - rect.top  - size/2) + 'px';
          btn.appendChild(ripple);
          setTimeout(() => ripple.remove(), 650);
        });
      });
    })();
  </script>
</body>
</html>
